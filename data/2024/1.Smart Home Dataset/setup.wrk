{"data":[{"id":"1708516869147330","contents":"# 1. Schema Setup\r\n- Create Home Tag Table with rollup table to fast data navigation","height":66,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1708516879313927","contents":"-- drop table home cascade;\r\ncreate tag table if not exists home (\r\n    name varchar(32) primary key,\r\n    time datetime basetime,\r\n    value double summarized\r\n) with rollup;","height":156,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true},{"id":"1708582018305350","contents":"# 2-1. Loading : Small Data Setfrom local CSV\r\n- Execute load-csv.tql (for 100,000 lines of Home IoT data)\r\n- This will take around 30 sec. ~ 1 minutes for 2,799,972 rows loading\r\n- Original Data URL (https://www.kaggle.com/code/offmann/smart-home-dataset)","height":113,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1708408675406945","contents":"CSV(file(\"/datahub/data/2024/1.Smart Home Dataset/home-10k.csv\"))\nPOPVALUE(20)\nPOPVALUE(26)\nPOPVALUE(22)\nTRANSPOSE(header(true), fixed(0))\nPUSHVALUE(0, 'TAG-' + strTrimSpace(value(1)), \"name\")\nMAPVALUE(1, parseTime(value(1), 's','UTC'), 'time')\nPOPVALUE(2)\nMAPVALUE(2, parseFloat(value(2)), \"value\")\nAPPEND(table(\"home\"))","height":227,"lineHeight":19,"minimal":false,"type":"tql","tqlType":"text","lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1723870829001309","contents":"# 2-2. Loading : Large Data Set from Machbase DATAHUB by TQL\r\n- This will take 3~5 min","height":97,"lineHeight":19,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1723870886846602","contents":"CSV( file(`https://datahub-2024-1.machbase.com/db/query?`+        `format=csv&`+        `q=`+escapeParam(`select * from home`)))\r\nDROP(1)\r\nMAPVALUE(2, parseFloat(value(2)))\r\nMAPVALUE(1, parseTime(value(1), 'ns'))\r\nAPPEND(table('home'))","height":141,"lineHeight":19,"minimal":false,"type":"tql","tqlType":"text","lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1723870918423394","contents":"# 2-3. Loading : The Fastest Large Data Set from Machbase DATAHUB by curl\r\n- This will take 1~2 min\r\n- run below curl script on your linux or windows console","height":107,"lineHeight":19,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1723870956931263","contents":" curl -o - https://datahub-2024-1.machbase.com/db/query  --data-urlencode \"q=select * from home  \" --data-urlencode \"format=csv\" |  curl -X POST \"http://127.0.0.1:5654/db/write/home?timeformat=ns&heading=true&method=append\" -H \"Content-Type: text/csv\"   --data-binary @-","height":67,"lineHeight":19,"minimal":false,"type":"shell","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true}]}